(function(){var i,l;"use strict";const a={};for(const[e,s]of Object.entries((i=window.post.buttons.marks)!=null?i:{}))a[e]={get button(){var t;return{icon:(t=s.icon)!=null?t:"bolt",label:s.label}},commands(){return()=>this.toggle()},get name(){return e},get schema(){return{parseDOM:[{tag:s.tag,class:s.class}],toDOM:()=>{var t;return[s.tag,{class:s.class,style:(t=s.style)!=null?t:"",...s.attrs},0]}}}};for(const[e,s]of Object.entries((l=window.post.buttons.links)!=null?l:{}))a[e]={get button(){return{icon:s.icon,label:s.label}},commands(){const t={};return t[e]=r=>{if(r.altKey||r.metaKey)return this.remove();window.panel.dialog.open({component:"k-link-dialog",props:{value:this.editor.getMarkAttrs(e)},on:{cancel:()=>this.editor.focus(),submit:n=>{window.panel.dialog.close(),this.editor.command("toggle"+e,n)}}})},t["insert"+e]=(r={})=>{const{selection:n}=this.editor.state;if(n.empty&&this.editor.activeMarks.includes(e)===!1&&this.editor.insertText(r.href,!0),r.href)return this.update(r)},t["toggle"+e]=(r={})=>{var n;((n=r.href)==null?void 0:n.length)>0?this.editor.command("insert"+e,r):this.editor.command("remove"+e)},t["remove"+e]=()=>this.remove(),t},get defaults(){return{target:null}},get name(){return e},plugins(){return[{props:{handleClick:(t,r,n)=>{const o=this.editor.getMarkAttrs(e);o.href&&n.altKey===!0&&(n.stopPropagation(),window.open(o.href,o.target))}}}]},get schema(){return{attrs:{href:{default:null},target:{default:null},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]:not([href^='mailto:'])",class:s.class,getAttrs:t=>({href:t.getAttribute("href"),target:t.getAttribute("target"),title:t.getAttribute("title")})}],toDOM:t=>["a",{class:s.class,style:s.style,...t.attrs,...s.attrs},0]}}};window.panel.plugin("post/buttons",{writerMarks:a})})();
