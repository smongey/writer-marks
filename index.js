(function(){"use strict";const n={};for(const[t,e]of Object.entries(window.smongey.writermarks.marks??{}))n[t]={get button(){return{icon:e.icon??"bolt",label:e.label}},commands(){return()=>this.toggle()},get name(){return t},get schema(){return{parseDOM:[{tag:e.tag,class:e.class}],toDOM:()=>[e.tag,{class:e.class,style:e.style??"",...e.attrs},0]}}};for(const[t,e]of Object.entries(window.smongey.writermarks.links??{}))n[t]={get button(){return{icon:e.icon,label:e.label}},commands(){const r={};return r[t]=s=>{if(s.altKey||s.metaKey)return this.remove();window.panel.dialog.open({component:"k-link-dialog",props:{value:this.editor.getMarkAttrs(t)},on:{cancel:()=>this.editor.focus(),submit:a=>{window.panel.dialog.close(),this.editor.command("toggle"+t,a)}}})},r["insert"+t]=(s={})=>{const{selection:a}=this.editor.state;if(a.empty&&this.editor.activeMarks.includes(t)===!1&&this.editor.insertText(s.href,!0),s.href)return this.update(s)},r["toggle"+t]=(s={})=>{var a;((a=s.href)==null?void 0:a.length)>0?this.editor.command("insert"+t,s):this.editor.command("remove"+t)},r["remove"+t]=()=>this.remove(),r},get defaults(){return{target:null}},get name(){return t},plugins(){return[{props:{handleClick:(r,s,a)=>{const i=this.editor.getMarkAttrs(t);i.href&&a.altKey===!0&&(a.stopPropagation(),window.open(i.href,i.target))}}}]},get schema(){return{attrs:{href:{default:null},target:{default:null},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]:not([href^='mailto:'])",class:e.class,getAttrs:r=>({href:r.getAttribute("href"),target:r.getAttribute("target"),title:r.getAttribute("title")})}],toDOM:r=>["a",{class:e.class,style:e.style,...r.attrs,...e.attrs},0]}}};window.panel.plugin("smongey/writer-marks",{writerMarks:n})})();
